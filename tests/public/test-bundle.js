(()=>{"use strict";function t(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function e(t){return"function"==typeof t.GetHashCode}function n(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}class r{constructor(t){this.iter=t}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const t=this.iter.next();return this.current=t.value,!t.done}"System.Collections.IEnumerator.Reset"(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function o(t){return"function"==typeof t.GetEnumerator?t.GetEnumerator():new r(t[Symbol.iterator]())}function i(t){return{[Symbol.iterator](){return this},next(){const e=t["System.Collections.IEnumerator.MoveNext"]();return{done:!e,value:e?t["System.Collections.IEnumerator.get_Current"]():void 0}}}}function s(t,e){let n=t.toString(10);for(;n.length<e;)n="0"+n;return n}function u(t){const e=t;return"number"==typeof e.offset?e.offset:1===t.kind?0:-6e4*t.getTimezoneOffset()}function c(t,e){return(t=t<0&&null!=e&&10!==e?4294967295+t+1:t).toString(e)}class l{static id(t){return l.idMap.has(t)||l.idMap.set(t,++l.count),l.idMap.get(t)}}function a(t){let e=0,n=5381;const r=t.length;for(;e<r;)n=33*n^t.charCodeAt(e++);return n}function f(t){return 2654435761*t|0}function h(t){return 0===t.length?0:t.reduce(((t,e)=>(t<<5)+t^e))}function d(n){if(null==n)return 0;switch(typeof n){case"boolean":return n?1:0;case"number":return f(n);case"string":return a(n);default:return e(n)?n.GetHashCode():t(n)?function(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r++)n[r]=d(t[r]);return h(n)}(n):n instanceof Date?function(t){return t.getTime()}(n):Object.getPrototypeOf(n).constructor===Object?h(Object.values(n).map((t=>d(t)))):f(l.id(n))}}function g(t,e,n){if(null==t)return null==e;if(null==e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function m(t,e){return g(t,e,p)}function p(e,n){return e===n||(null==e?null==n:null!=n&&"object"==typeof e&&(function(t){return"function"==typeof t.Equals}(e)?e.Equals(n):t(e)?t(n)&&m(e,n):e instanceof Date?n instanceof Date&&0===w(e,n):Object.getPrototypeOf(e).constructor===Object&&function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let o=0;o<n.length;o++)if(n[o]!==r[o]||!p(t[n[o]],e[r[o]]))return!1;return!0}(e,n)))}function w(t,e){let n,r;return"offset"in t&&"offset"in e?(n=t.getTime(),r=e.getTime()):(n=t.getTime()+u(t),r=e.getTime()+u(e)),n===r?0:n<r?-1:1}function y(t,e){return function(t,e,n){if(null==t)return null==e?0:1;if(null==e)return-1;if(t.length!==e.length)return t.length<e.length?-1:1;for(let r=0,o=0;r<t.length;r++)if(o=n(t[r],e[r]),0!==o)return o;return 0}(t,e,b)}function b(e,n){return e===n?0:null==e?null==n?0:-1:null==n?1:"object"!=typeof e?e<n?-1:1:function(t){return"function"==typeof t.CompareTo}(e)?e.CompareTo(n):t(e)?t(n)?y(e,n):-1:e instanceof Date?n instanceof Date?w(e,n):-1:Object.getPrototypeOf(e).constructor===Object?function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return n.length<r.length?-1:1;n.sort(),r.sort();for(let o=0,i=0;o<n.length;o++){const s=n[o];if(s!==r[o])return s<r[o]?-1:1;if(i=b(t[s],e[s]),0!==i)return i}return 0}(e,n):-1}function C(t){let e=t;return(t,n)=>n?void(e=t):e}l.idMap=new WeakMap,l.count=0;class S{constructor(t){this.value=t}toJSON(){return this.value}toString(){return String(this.value)}GetHashCode(){return d(this.value)}Equals(t){return null!=t&&p(this.value,t instanceof S?t.value:t)}CompareTo(t){return null==t?1:b(this.value,t instanceof S?t.value:t)}}function v(t){return null==t||t instanceof S?new S(t):t}function E(t){if(null==t)throw new Error("Option has no value");return t instanceof S?t.value:t}function x(t,e=0){if(null!=t&&"object"==typeof t){if("function"==typeof t.toString)return t.toString();if(Symbol.iterator in t)return function(t){let e=0,n="[";for(const r of t){if(0===e)n+=x(r);else{if(100===e){n+="; ...";break}n+="; "+x(r)}e++}return n+"]"}(t);{const n=Object.getPrototypeOf(t).constructor;return n===Object&&e<10?"{ "+Object.entries(t).map((([t,n])=>t+" = "+x(n,e+1))).join("\n  ")+" }":n.name}}return String(t)}class P{get name(){return this.cases()[this.tag]}toJSON(){return 0===this.fields.length?this.name:[this.name].concat(this.fields)}toString(){if(0===this.fields.length)return this.name;{let t="",e=!0;if(1===this.fields.length){const n=x(this.fields[0]);e=n.indexOf(" ")>=0,t=n}else t=this.fields.map((t=>x(t))).join(", ");return this.name+(e?" (":" ")+t+(e?")":"")}}GetHashCode(){const t=this.fields.map((t=>d(t)));return t.splice(0,0,f(this.tag)),h(t)}Equals(t){return this===t||!!n(this,t)&&this.tag===t.tag&&m(this.fields,t.fields)}CompareTo(t){return this===t?0:n(this,t)?this.tag===t.tag?y(this.fields,t.fields):this.tag<t.tag?-1:1:-1}}class _{toJSON(){return function(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++)e[n[r]]=t[n[r]];return e}(this)}toString(){return t=this,"{ "+Object.entries(t).map((([t,e])=>t+" = "+x(e))).join("\n  ")+" }";var t}GetHashCode(){return t=this,h(Object.values(t).map((t=>d(t))));var t}Equals(t){return function(t,e){if(t===e)return!0;if(n(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++)if(!p(t[n[r]],e[n[r]]))return!1;return!0}return!1}(this,t)}CompareTo(t){return function(t,e){if(t===e)return 0;if(n(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++){const o=b(t[n[r]],e[n[r]]);if(0!==o)return o}return 0}return-1}(this,t)}}class I{constructor(t,e){"function"==typeof e?(this.getter=t,this.setter=e):(this.getter=()=>t,this.setter=e=>{t=e})}get contents(){return this.getter()}set contents(t){this.setter(t)}}class N{constructor(t,e,n,r,o,i,s){this.fullname=t,this.generics=e,this.construct=n,this.parent=r,this.fields=o,this.cases=i,this.enumCases=s}toString(){return G(this)}GetHashCode(){return D(this)}Equals(t){return k(this,t)}}function M(t){return null!=t.generics?t.generics:[]}function D(t){return h([a(t.fullname),...M(t).map(D)])}function k(t,e){return""===t.fullname?""===e.fullname&&g(O(t),O(e),(([t,e],[n,r])=>t===n&&k(e,r))):t.fullname===e.fullname&&g(M(t),M(e),k)}function G(t){const e=null==t.generics||function(t){return t.fullname.endsWith("[]")}(t)?[]:t.generics;return e.length>0?t.fullname+"["+e.map((t=>G(t))).join(",")+"]":t.fullname}function O(t){if(null!=t.fields)return t.fields();throw new Error(`${t.fullname} is not an F# record type`)}var T;new N("System.Object"),new N("Microsoft.FSharp.Core.Unit"),new N("System.Char"),new N("System.String"),new N("System.Boolean"),new N("System.SByte"),new N("System.Byte"),new N("System.Int16"),new N("System.UInt16"),new N("System.Int32"),new N("System.UInt32"),new N("System.Single"),new N("System.Double"),new N("System.Decimal"),function(t){t[t.AllowHexSpecifier=512]="AllowHexSpecifier"}(T||(T={}));const A=Symbol("numeric");function j(t){return"number"==typeof t||(null==t?void 0:t[A])}function L(t,e){return"number"==typeof t?t*e:t[A]().multiply(e)}function R(t,e){return"number"==typeof t?t.toFixed(e):t[A]().toFixed(e)}function H(t,e){return"number"==typeof t?t.toPrecision(e):t[A]().toPrecision(e)}function U(t,e){return"number"==typeof t?t.toExponential(e):t[A]().toExponential(e)}function F(t){return"number"==typeof t?(Number(t)>>>0).toString(16):t[A]().toHex()}var q=null;try{q=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function B(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function z(t){return!0===(t&&t.__isLong__)}B.prototype.GetHashCode=function(){let t=this.unsigned?1:0;return t=(t<<5)+t^this.high,t=(t<<5)+t^this.low,t},B.prototype.Equals=function(t){return wt(this,t)},B.prototype.CompareTo=function(t){return St(this,t)},B.prototype.toString=function(t){return dt(this,t)},B.prototype.toJSON=function(){return dt(this)},B.prototype[A]=function(){const t=this;return{multiply:e=>Pt(t,e),toPrecision:e=>String(t)+(0).toPrecision(e).substr(1),toExponential:e=>String(t)+(0).toExponential(e).substr(1),toFixed:e=>String(t)+(0).toFixed(e).substr(1),toHex:()=>{return dt(t.unsigned?t:function(t,e,n){return n?function(t,e){return new B(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)}(t,e):function(t,e){return new B(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}(t,e)}((e=t,n?function(t){var e=t.high,n=t.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}(e):function(t){var e=t.high,n=t.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,n>>>24,n>>>16&255,n>>>8&255,255&n]}(e)),!0),16);var e,n}}},B.prototype.__isLong__,Object.defineProperty(B.prototype,"__isLong__",{value:!0});var W={},J={};function Z(t,e){var n,r,o;return e?(o=0<=(t>>>=0)&&t<256)&&(r=J[t])?r:(n=V(t,(0|t)<0?-1:0,!0),o&&(J[t]=n),n):(o=-128<=(t|=0)&&t<128)&&(r=W[t])?r:(n=V(t,t<0?-1:0,!1),o&&(W[t]=n),n)}function $(t,e){if(isNaN(t))return e?ot:rt;if(e){if(t<0)return ot;if(t>=tt)return lt}else{if(t<=-et)return at;if(t+1>=et)return ct}return t<0?vt($(-t,e)):V(t%Q|0,t/Q|0,e)}function V(t,e,n){return new B(t,e,n)}var X=Math.pow;function Y(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return rt;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r=t.indexOf("-");if(r>0)throw Error("interior hyphen");if(0===r)return vt(Y(t.substring(1),e,n));for(var o=$(X(n,8)),i=rt,s=0;s<t.length;s+=8){var u=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+u),n);i=Et(u<8?Pt(i,$(X(n,u))):i=Pt(i,o),$(c))}return i.unsigned=e,i}function K(t,e){return"number"==typeof t?$(t,e):"string"==typeof t?Y(t,e):V(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}var Q=4294967296,tt=Q*Q,et=tt/2,nt=Z(1<<24),rt=Z(0),ot=Z(0,!0),it=Z(1),st=Z(1,!0),ut=Z(-1),ct=V(-1,2147483647,!1),lt=V(-1,-1,!0),at=V(0,-2147483648,!1);function ft(t){return t.unsigned?t.low>>>0:t.low}function ht(t){return t.unsigned?(t.high>>>0)*Q+(t.low>>>0):t.high*Q+(t.low>>>0)}function dt(t,e){if((e=e||10)<2||36<e)throw RangeError("radix");if(gt(t))return"0";if(mt(t)){if(wt(t,at)){var n=$(e),r=_t(t,n),o=xt(Pt(r,n),t);return dt(r,e)+ft(o).toString(e)}return"-"+dt(vt(t),e)}for(var i=$(X(e,6),t.unsigned),s=t,u="";;){var c=_t(s,i),l=(ft(xt(s,Pt(c,i)))>>>0).toString(e);if(gt(s=c))return l+u;for(;l.length<6;)l="0"+l;u=""+l+u}}function gt(t){return 0===t.high&&0===t.low}function mt(t){return!t.unsigned&&t.high<0}function pt(t){return 1==(1&t.low)}function wt(t,e){return z(e)||(e=K(e)),(t.unsigned===e.unsigned||t.high>>>31!=1||e.high>>>31!=1)&&t.high===e.high&&t.low===e.low}function yt(t,e){return St(t,e)<0}function bt(t,e){return St(t,e)>0}function Ct(t,e){return St(t,e)>=0}function St(t,e){if(z(e)||(e=K(e)),wt(t,e))return 0;var n=mt(t),r=mt(e);return n&&!r?-1:!n&&r?1:t.unsigned?e.high>>>0>t.high>>>0||e.high===t.high&&e.low>>>0>t.low>>>0?-1:1:mt(xt(t,e))?-1:1}function vt(t){return!t.unsigned&&wt(t,at)?at:Et(function(t){return V(~t.low,~t.high,t.unsigned)}(t),it)}function Et(t,e){z(e)||(e=K(e));var n=t.high>>>16,r=65535&t.high,o=t.low>>>16,i=65535&t.low,s=e.high>>>16,u=65535&e.high,c=e.low>>>16,l=0,a=0,f=0,h=0;return f+=(h+=i+(65535&e.low))>>>16,a+=(f+=o+c)>>>16,l+=(a+=r+u)>>>16,l+=n+s,V((f&=65535)<<16|(h&=65535),(l&=65535)<<16|(a&=65535),t.unsigned)}function xt(t,e){return z(e)||(e=K(e)),Et(t,vt(e))}function Pt(t,e){if(gt(t))return t.unsigned?ot:rt;if(z(e)||(e=K(e)),q)return V(q.mul(t.low,t.high,e.low,e.high),q.get_high(),t.unsigned);if(gt(e))return t.unsigned?ot:rt;if(wt(t,at))return pt(e)?at:rt;if(wt(e,at))return pt(t)?at:rt;if(mt(t))return mt(e)?Pt(vt(t),vt(e)):vt(Pt(vt(t),e));if(mt(e))return vt(Pt(t,vt(e)));if(yt(t,nt)&&yt(e,nt))return $(ht(t)*ht(e),t.unsigned);var n=t.high>>>16,r=65535&t.high,o=t.low>>>16,i=65535&t.low,s=e.high>>>16,u=65535&e.high,c=e.low>>>16,l=65535&e.low,a=0,f=0,h=0,d=0;return h+=(d+=i*l)>>>16,f+=(h+=o*l)>>>16,h&=65535,f+=(h+=i*c)>>>16,a+=(f+=r*l)>>>16,f&=65535,a+=(f+=o*c)>>>16,f&=65535,a+=(f+=i*u)>>>16,a+=n*l+r*c+o*u+i*s,V((h&=65535)<<16|(d&=65535),(a&=65535)<<16|(f&=65535),t.unsigned)}function _t(t,e){if(z(e)||(e=K(e)),gt(e))throw Error("division by zero");var n,r,o;if(q)return t.unsigned||-2147483648!==t.high||-1!==e.low||-1!==e.high?V((t.unsigned?q.div_u:q.div_s)(t.low,t.high,e.low,e.high),q.get_high(),t.unsigned):t;if(gt(t))return t.unsigned?ot:rt;if(t.unsigned){if(e.unsigned||(e=function(t){return t.unsigned?t:V(t.low,t.high,!0)}(e)),bt(e,t))return ot;if(bt(e,function(t,e){if(z(e)&&(e=ft(e)),0==(e&=63))return t;var n=t.high;return e<32?V(t.low>>>e|n<<32-e,n>>>e,t.unsigned):V(32===e?n:n>>>e-32,0,t.unsigned)}(t,1)))return st;o=ot}else{if(wt(t,at))return wt(e,it)||wt(e,ut)?at:wt(e,at)?it:wt(n=function(t,e){return z(e)&&(e=ft(e)),0==(e&=63)?t:e<32?V(t.low<<e,t.high<<e|t.low>>>32-e,t.unsigned):V(0,t.low<<e-32,t.unsigned)}(_t(function(t,e){return z(e)&&(e=ft(e)),0==(e&=63)?t:e<32?V(t.low>>>e|t.high<<32-e,t.high>>e,t.unsigned):V(t.high>>e-32,t.high>=0?0:-1,t.unsigned)}(t,1),e),1),rt)?mt(e)?it:ut:o=Et(n,_t(r=xt(t,Pt(e,n)),e));if(wt(e,at))return t.unsigned?ot:rt;if(mt(t))return mt(e)?_t(vt(t),vt(e)):vt(_t(vt(t),e));if(mt(e))return vt(_t(t,vt(e)));o=rt}for(r=t;Ct(r,e);){n=Math.max(1,Math.floor(ht(r)/ht(e)));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:X(2,i-48),u=$(n),c=Pt(u,e);mt(c)||bt(c,r);)c=Pt(u=$(n-=s,t.unsigned),e);gt(u)&&(u=it),o=Et(o,u),r=xt(r,c)}return o}const It=Et,Nt=Pt,Mt=_t,Dt=vt,kt=function(t,e){return z(e)||(e=K(e)),V(t.low&e.low,t.high&e.high,t.unsigned)},Gt=St,Ot=V,Tt=ft,At=ht;function jt(t,e,n){let r=t,o=0;switch(n){case 0:r=t<<24>>24,o=r;break;case 4:r=t<<24>>>24;break;case 1:r=t<<16>>16,o=r;break;case 5:r=t<<16>>>16;break;case 2:r=t>>0,o=r;break;case 6:r=t>>>0}return V(r,o>>31,e)}function Lt(t){const e=t<0,n=(t=Math.abs(t))%36e5/6e4;return(e?"-":"+")+s(~~(t/36e5),2)+":"+s(n,2)}function Rt(t,e){const n=t.toISOString();return"first"===e?n.substring(0,n.indexOf("T")):n.substring(n.indexOf("T")+1,n.length-1)}function Ht(t,e,n){return e.replace(/(\w)\1*/g,(e=>{let r=Number.NaN;switch(e.substring(0,1)){case"y":const o=n?t.getUTCFullYear():t.getFullYear();r=e.length<4?o%100:o;break;case"M":r=(n?t.getUTCMonth():t.getMonth())+1;break;case"d":r=n?t.getUTCDate():t.getDate();break;case"H":r=n?t.getUTCHours():t.getHours();break;case"h":const i=n?t.getUTCHours():t.getHours();r=i>12?i%12:i;break;case"m":r=n?t.getUTCMinutes():t.getMinutes();break;case"s":r=n?t.getUTCSeconds():t.getSeconds();break;case"f":r=n?t.getUTCMilliseconds():t.getMilliseconds()}return Number.isNaN(r)?e:r<10&&e.length>1?"0"+r:""+r}))}function Ut(t,e,n){return null!=t.offset?function(t,e){var n,r,o;const i=new Date(t.getTime()+(null!==(n=t.offset)&&void 0!==n?n:0));if("string"!=typeof e)return i.toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Lt(null!==(r=t.offset)&&void 0!==r?r:0);if(1!==e.length)return Ht(i,e,!0);switch(e){case"D":case"d":return Rt(i,"first");case"T":case"t":return Rt(i,"second");case"O":case"o":return function(t,e){const n=t.toISOString();return n.substring(0,n.length-1)+Lt(e)}(i,null!==(o=t.offset)&&void 0!==o?o:0);default:throw new Error("Unrecognized Date print format")}}(t,e):function(t,e){const n=1===t.kind;if("string"!=typeof e)return n?t.toUTCString():t.toLocaleString();if(1!==e.length)return Ht(t,e,n);switch(e){case"D":case"d":return n?Rt(t,"first"):t.toLocaleDateString();case"T":case"t":return n?Rt(t,"second"):t.toLocaleTimeString();case"O":case"o":return function(t,e){if(e)return t.toISOString();{const e=null==t.kind||2===t.kind;return s(t.getFullYear(),4)+"-"+s(t.getMonth()+1,2)+"-"+s(t.getDate(),2)+"T"+s(t.getHours(),2)+":"+s(t.getMinutes(),2)+":"+s(t.getSeconds(),2)+"."+s(t.getMilliseconds(),3)+(e?Lt(-6e4*t.getTimezoneOffset()):"")}}(t,n);default:throw new Error("Unrecognized Date print format")}}(t,e)}function Ft(){return function(t,e){const n=new Date(t);return n.kind=0|(null==e?0:e),n}(Date.now(),2)}function qt(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}const Bt=/(^|[^%])%([0+\- ]*)(\*|\d+)?(?:\.(\d+))?(\w)/,zt=/(?:(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w))?%P\(\)/g,Wt=/\{(\d+)(,-?\d+)?(?:\:([a-zA-Z])(\d{0,2})|\:(.+?))?\}/g;function Jt(t,e){return function(t,e){return"number"==typeof t?t<e?-1:t>e?1:0:t.CompareTo(e)}(t,e)<0}function Zt(t){return{input:t,cont:(e=t,t=>Bt.test(e)?Kt(e,t):t(e))};var e}function $t(t,e){let n=0;return t.replace(zt,((t,r,o,i,s,u)=>Xt(e[n++],r,o,i,s,u))).replace(/%%/g,"%")}function Vt(t){return function(t,e){return"string"==typeof e?t(e):e.cont(t)}((t=>t),t)}function Xt(t,e,n,r,o,i){let s="";if(n=n||"",i=i||"",j(t))switch("x"!==i.toLowerCase()&&(Jt(t,0)?(t=L(t,-1),s="-"):n.indexOf(" ")>=0?s=" ":n.indexOf("+")>=0&&(s="+")),o=null==o?null:parseInt(o,10),i){case"f":case"F":t=R(t,o=null!=o?o:6);break;case"g":case"G":t=null!=o?H(t,o):H(t);break;case"e":case"E":t=null!=o?U(t,o):U(t);break;case"x":t=F(t);break;case"X":t=F(t).toUpperCase();break;default:t=String(t)}else t=t instanceof Date?Ut(t):x(t);if(r="number"==typeof r?r:parseInt(r,10),isNaN(r))t=s+t;else{const e=n.indexOf("0")>=0,o=n.indexOf("-")>=0,i=o||!e?" ":"0";t="0"===i?s+(t=te(t,r-s.length,i,o)):te(s+t,r,i,o)}return e?e+t:t}function Yt(t,e,n){return t.replace(Bt,((t,r,o,i,s,u)=>{if(null!=n.contents)i=n.contents,n.contents=null;else if("*"===i){if(e<0)throw new Error("Non-negative number required");return n.contents=e,t}return Xt(e,r,o,i,s,u).replace(/%/g,"%%")}))}function Kt(t,e,n=new I(null)){return(...r)=>{let o=t;for(const t of r)o=Yt(o,t,n);return Bt.test(o)?Kt(o,e,n):e(o.replace(/%%/g,"%"))}}function Qt(t,e){return Array.isArray(e)?e.join(t):Array.from(e).join(t)}function te(t,e,n,r){n=n||" ",e-=t.length;for(let o=0;o<e;o++)t=r?t+n:n+t;return t}function ee(t,e,n){if(e+(n||0)>t.length)throw new Error("Invalid startIndex and/or length");return null!=n?t.substr(e,n):t.substr(e)}function ne(t,e){return"function"==typeof t?new t(e):new Array(e)}function re(t,e,n){if(t<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=ne(n,t);for(let n=0;n<=t-1;n++)r[n]=e(n);return r}class oe extends _{constructor(t,e){super(),this.head=t,this.tail=e}toString(){return"["+Qt("; ",this)+"]"}Equals(t){return this===t||((t,e)=>{t:for(;;){const n=t,r=e,o=[n.tail,r.tail];if(null!=o[0]){if(null!=o[1]){const i=o[0],s=o[1];if(p(n.head,r.head)){t=i,e=s;continue t}return!1}return!1}return null==o[1]}})(this,t)}GetHashCode(){return 0|((t,e,n)=>{for(;;){const r=t,o=e,i=n,s=i.tail;if(null==s)return 0|o;{const u=s;if(r>18)return 0|o;t=r+1,e=(o<<1)+d(i.head)+631*r,n=u}}})(0,0,this)}CompareTo(t){return 0|((t,e)=>{t:for(;;){const n=t,r=e,o=[n.tail,r.tail];if(null!=o[0]){if(null!=o[1]){const i=o[0],s=o[1],u=0|b(n.head,r.head);if(0===u){t=i,e=s;continue t}return 0|u}return 1}return null!=o[1]?-1:0}})(this,t)}GetEnumerator(){return new ie(this)}[Symbol.iterator](){return i(this.GetEnumerator())}"System.Collections.IEnumerable.GetEnumerator"(){return o(this)}}class ie{constructor(t){this.xs=t,this.it=this.xs,this.current=null}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const t=this,e=t.it.tail;if(null!=e){const n=e;return t.current=t.it.head,t.it=n,!0}return!1}"System.Collections.IEnumerator.Reset"(){const t=this;t.it=t.xs,t.current=null}Dispose(){}}function se(t){return 0|((t,e)=>{for(;;){const n=t,r=e.tail;if(null==r)return 0|n;t=n+1,e=r}})(0,t)}function ue(t){if(null!=t.tail)return t.head;throw new Error("List was empty\\nParameter name: list")}function ce(t){const e=t.tail;if(null!=e)return e;throw new Error("List was empty\\nParameter name: list")}function le(){return new oe(null,void 0)}function ae(t,e){return new oe(t,e)}function fe(t){return new oe(t,new oe(null,void 0))}function he(t){return null==t.tail}function de(t){return se(t)}function ge(t){return ue(t)}function me(t){return ce(t)}function pe(t){const e=function(t){t:for(;;){const e=t;if(null==e.tail)return;{const n=ce(e);if(null==n.tail)return v(ue(e));t=n;continue t}}}(t);if(null==e)throw new Error("List was empty");return E(e)}function we(t,e,n){let r=e,o=n;for(;null!=o.tail;)r=t(r,ue(o)),o=ce(o);return r}function ye(t,e){return we(((e,n)=>{t(n)}),void 0,e)}function be(t,e){let n=e;for(let e=t.length-1;e>=0;e--)n=new oe(t[e],n);return n}function Ce(t){return be(t,new oe(null,void 0))}function Se(t,e){return we(((t,e)=>new oe(e,t)),e,function(t){return we(((t,e)=>new oe(e,t)),new oe(null,void 0),t)}(t))}function ve(t,e){const n=new oe(null,void 0),r=we(((e,n)=>{const r=new oe(t(n),void 0);return e.tail=r,r}),n,e),o=new oe(null,void 0);return r.tail=o,ce(n)}function Ee(t,e){const n=new oe(null,void 0),r=we(((e,n)=>{if(t(n)){const t=new oe(n,void 0);return e.tail=t,t}return e}),n,e),o=new oe(null,void 0);return r.tail=o,ce(n)}function xe(){throw new Error("Enumeration has not started. Call MoveNext.")}function Pe(){throw new Error("Enumeration already finished.")}class _e{constructor(t){this.f=t}toString(){let t=0,e="seq [";const n=o(this);try{for(;t<4&&n["System.Collections.IEnumerator.MoveNext"]();)t>0&&(e+="; "),e+=x(n["System.Collections.Generic.IEnumerator`1.get_Current"]()),t+=1;return 4===t&&(e+="; ..."),e+"]"}finally{n.Dispose()}}GetEnumerator(){return this.f()}[Symbol.iterator](){return i(this.GetEnumerator())}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}class Ie{constructor(t,e,n){this.current=t,this.next=e,this.dispose=n}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){return function(){throw new Error("Reset is not supported on this enumerator.")}()}Dispose(){this.dispose()}}function Ne(t,e,n){return new Ie(t,e,n)}function Me(t){return function(t){return new _e(t)}(t)}function De(t){return e="source",null==t&&function(t){throw new Error(t)}(e),o(t);var e}function ke(t){return Me((()=>o(t())))}function Ge(t){return Me((()=>function(t){let e,n,r,i=!1,s=!1;const u=()=>{if(s=!0,null!=n){const t=n;try{t.Dispose()}finally{n=void 0}}if(null!=e){const t=e;try{t.Dispose()}finally{e=void 0}}};return Ne((()=>(i?s&&Pe():xe(),null!=r?E(r):Pe())),(()=>(i||(i=!0),!s&&(()=>{let i,s;for(;null==s;){const c=[e,n];if(null!=c[0])if(null!=c[1]){const t=c[1];if(t["System.Collections.IEnumerator.MoveNext"]())r=v(t["System.Collections.Generic.IEnumerator`1.get_Current"]()),s=!0;else try{t.Dispose()}finally{n=void 0}}else{const t=c[0];t["System.Collections.IEnumerator.MoveNext"]()?(i=t["System.Collections.Generic.IEnumerator`1.get_Current"](),n=o(i)):(u(),s=!1)}else e=o(t)}return E(s)})())),(()=>{s||u()}))}(t)))}function Oe(t){return ke((()=>function(t,e){const n=ne(void 0,1);return n[0]=t,n}(t)))}function Te(t,e,n){return Me((()=>function(t,e,n){let r,o=!1,i=v(t());const s=()=>{if(null!=i){const t=E(i);try{n(t)}finally{i=void 0}}},u=()=>{try{s()}finally{r=void 0}};return Ne((()=>(o||xe(),null!=r?E(r):Pe())),(()=>{if(o||(o=!0),null!=i){const t=E(i);let n;try{n=e(t)}catch(t){throw u(),t}return null!=n?(r=n,!0):(u(),!1)}return!1}),s)}(t,e,n)))}function Ae(t,e){return Ge([t,e])}function je(t,e,n){const r=De(n);try{let n=e;for(;r["System.Collections.IEnumerator.MoveNext"]();)n=t(n,r["System.Collections.Generic.IEnumerator`1.get_Current"]());return n}finally{r.Dispose()}}function Le(t,e){return je(((e,n)=>{t(n)}),void 0,e)}function Re(t,e){return Te((()=>De(e)),(e=>e["System.Collections.IEnumerator.MoveNext"]()?v(t(e["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0),(t=>{t.Dispose()}))}function He(t,e){return ke((()=>Ge(Re(t,e))))}class Ue extends Error{constructor(){super("The operation was canceled"),Object.setPrototypeOf(this,Ue.prototype)}}function Fe(t){return e=>{if(e.cancelToken.isCancelled)e.onCancel(new Ue);else if(e.trampoline.incrementAndCheck())e.trampoline.hijack((()=>{try{t(e)}catch(t){e.onError(t)}}));else try{t(e)}catch(t){e.onError(t)}}}new class{Bind(t,e){return function(t,e){return Fe((n=>{t({onSuccess:t=>{try{e(t)(n)}catch(t){n.onError(t)}},onError:n.onError,onCancel:n.onCancel,cancelToken:n.cancelToken,trampoline:n.trampoline})}))}(t,e)}Combine(t,e){return this.Bind(t,(()=>e))}Delay(t){return Fe((e=>t()(e)))}For(t,e){const n=t[Symbol.iterator]();let r=n.next();return this.While((()=>!r.done),this.Delay((()=>{const t=e(r.value);return r=n.next(),t})))}Return(t){return function(t){return Fe((e=>e.onSuccess(t)))}(t)}ReturnFrom(t){return t}TryFinally(t,e){return Fe((n=>{t({onSuccess:t=>{e(),n.onSuccess(t)},onError:t=>{e(),n.onError(t)},onCancel:t=>{e(),n.onCancel(t)},cancelToken:n.cancelToken,trampoline:n.trampoline})}))}TryWith(t,e){return Fe((n=>{t({onSuccess:n.onSuccess,onCancel:n.onCancel,cancelToken:n.cancelToken,trampoline:n.trampoline,onError:t=>{try{e(t)(n)}catch(t){n.onError(t)}}})}))}Using(t,e){return this.TryFinally(e(t),(()=>t.Dispose()))}While(t,e){return t()?this.Bind(e,(()=>this.While(t,e))):this.Return(void 0)}Zero(){return Fe((t=>t.onSuccess(void 0)))}},new class{constructor(t=!1){this._id=0,this._cancelled=t,this._listeners=new Map}get isCancelled(){return this._cancelled}cancel(){if(!this._cancelled){this._cancelled=!0;for(const[,t]of this._listeners)t()}}addListener(t){const e=this._id;return this._listeners.set(this._id++,t),e}removeListener(t){return this._listeners.delete(t)}register(t,e){const n=this,r=this.addListener(null==e?t:()=>t(e));return{Dispose(){n.removeListener(r)}}}};class qe extends _{constructor(t,e){super(),this.Name=t,this.Test=e}}class Be extends _{constructor(t,e){super(),this.Name=t,this.Tests=e}}function ze(t){console.log(v(t))}function We(t,e){return new qe(t,e)}function Je(t,e){return new Be(t,e)}function Ze(t,e){return t.mk("div",e)}class $e{constructor(t,e,n){this.OnNext=t,this.OnError=e||(t=>{}),this.OnCompleted=n||(()=>{})}}function Ve(t,e){return e.Subscribe(new $e(t))}const Xe=C(new class extends _{constructor(t,e){super(),this.SlowAnimations=t,this.LoggingEnabled=e}}(!1,!1));function Ye(t,e){if(t.has(e))return t.get(e);throw new Error(`The given key '${e}' was not present in the dictionary.`)}const Ke=new Map([]),Qe=C(!1);function tn(t,e){let n,r;var o,i,s;!Xe().LoggingEnabled||Ke.has(t)&&!Ye(Ke,t)||console.log(v((n=At((r=Ft(),i=(o=r).getTime(),s=u(o),Nt(It(It($(i),621355968e5),s),1e4)))/1e7%60,Vt(Zt("%0.3f: %s: %s"))(n)(t)(e))))}function en(t){console.log(v(Vt(Zt("error: %s"))(t)))}Qe()||(console.log(v("logging:init defaults")),Qe(!0,!0),Ke.set("store",!1),Ke.set("trans",!1),Ke.set("dom",!1),Ke.set("style",!1),Ke.set("bind",!1),Ke.set("each",!1),Ke.set("tick",!1));class nn extends _{constructor(t,e){super(),this.bound=0|t,this.digits=e}}function rn(t,e){for(;;){const n=t,r=e;if(0===r)return 1;if(r%2!=0)return n*rn(n*n,~~(r/2))|0;t=n*n,e=~~(r/2)}}function on(t){return t.bound}function sn(t,e){return t.digits[e]}function un(t,e){return jt(sn(t,e),!1,2)}function cn(t,e,n){t.digits[e]=n}function ln(t,e){for(;;){const n=t,r=e;if(0===r)return Ot(1,0,!1);if(r%2!=0)return Nt(n,ln(Nt(n,n),~~(r/2)));t=Nt(n,n),e=~~(r/2)}}function an(t,e){for(;;){const n=t,r=e;if(0===r)return 1;if(r%2!=0)return n*an(n*n,~~(r/2))|0;t=n*n,e=~~(r/2)}}Ot(2013265921,0,!1),Ot(2013265921,0,!0),re(28,(t=>rn(2,t)),Int32Array);const fn=16777216,hn=Ot(16777216,0,!1),dn=Ot(16777215,0,!1);function gn(t){return new nn(t,new Int32Array(t))}function mn(t){const e=0|((t,e)=>{for(;;){const n=t,r=e;if(-1===r||0!==n[r])return r+1|0;t=n,e=r-1}})(t.digits,t.bound-1);return t.bound=e,t}function pn(t){const e=0|(t<0?0:t);if(e<fn){const t=gn(1);return t.digits[0]=e,mn(t)}{const t=gn(2);for(let n=0;n<=1;n++)t.digits[n]=~~(e/an(fn,n))%fn;return mn(t)}}Ot(16777215,0,!0);const wn=pn(1),yn=pn(0);function bn(t){return t.bound-1}function Cn(t){return 0===t.bound}function Sn(t,e){return-1===function(t,e){return t.bound<e.bound?-1:t.bound>e.bound?1:0|((t,e,n)=>{for(;;){const r=t,o=e,i=n;if(-1===i)return 0;if(r[i]!==o[i])return r[i]<o[i]?-1:1;t=r,e=o,n=i-1}})(t.digits,e.digits,t.bound-1)}(t,e)}function vn(t,e,n){for(;;){const r=t,o=e,i=n;if(!(Gt(o,Ot(0,0,!1))>0))break;{const s=It(un(r,i),o);cn(r,i,~~Tt(kt(s,dn))),t=r,e=Mt(s,hn),n=i+1}}}function En(t,e){const n=0|on(t),r=gn(n+1|0),o=jt(e,!1,2);let i=Ot(0,0,!1);for(let e=0;e<=n-1;e++){const n=It(It(i,un(r,e)),Nt(un(t,e),o));cn(r,e,~~Tt(kt(n,dn))),i=Mt(n,hn)}return vn(r,i,n),mn(r)}class xn extends _{constructor(t,e,n,r,o,i,s){super(),this.bigL=0|t,this.twoToBigL=0|e,this.k=0|n,this.bigK=0|r,this.bigN=0|o,this.split=0|i,this.splits=s}}function Pn(t,e,n,r){return new xn(t,an(2,t),e,n,r,~~(24/t),re(~~(24/t),(e=>an(2,t*e)),Int32Array))}const _n=[Pn(1,28,268435456,268435456),Pn(2,26,67108864,134217728),Pn(3,24,16777216,50331648),Pn(4,22,4194304,16777216),Pn(5,20,1048576,5242880),Pn(6,18,262144,1572864),Pn(7,16,65536,458752),Pn(8,14,16384,131072),Pn(9,12,4096,36864),Pn(10,10,1024,10240),Pn(11,8,256,2816),Pn(12,6,64,768),Pn(13,4,16,208)];function In(t,e){return function(t,e){const n=1===on(t),r=1===on(e);return n&&r?function(t,e){const n=gn(2),r=Nt(jt(t,!1,2),jt(e,!1,2));return cn(n,0,~~Tt(kt(r,dn))),cn(n,1,~~Tt(Mt(r,hn))),mn(n)}(sn(t,0),sn(e,0)):n?En(e,sn(t,0)):r?En(t,sn(e,0)):function(t,e){const n=gn(t.bound+e.bound|0),r=n.digits,o=t.digits,i=e.digits;for(let s=0;s<=t.bound-1;s++){const t=jt(o[s],!1,2);let u=Ot(0,0,!1),c=0|s;for(let n=0;n<=e.bound-1;n++){const e=jt(i[n],!1,2),o=It(It(jt(r[c],!1,2),u),Nt(t,e));r[c]=~~Tt(kt(o,dn)),u=Mt(o,hn),c+=1}vn(n,u,c)}return mn(n)}(t,e)}(t,e)}function Nn(t,e,n,r){const o=t,i=[t.digits,bn(t)],s=0|i[1],u=i[0],c=[n.digits,bn(n)],l=0|c[1],a=c[0],f=jt(e,!1,2);let h=0,d=Nt(f,jt(a[0],!1,2));for(;Gt(d,Ot(0,0,!1))>0||h<l;){if(h>s)throw new Error("scaleSubInPlace: pre-condition did not apply, result would be -ve");let t=0|~~Tt(kt(d,dn)),e=Mt(d,hn);t<=u[h+r]?u[h+r]=u[h+r]-t:(u[h+r]=u[h+r]+(fn-t),e=It(e,Ot(1,0,!1))),d=h<l?It(e,Nt(f,jt(a[h+1],!1,2))):e,h+=1}mn(o)}function Mn(t,e,n,r){const o=t,i=[t.digits,bn(t)],s=0|i[1],u=i[0],c=[n.digits,bn(n)],l=0|c[1],a=c[0],f=jt(e,!1,2);let h=0,d=Nt(f,jt(a[0],!1,2));for(;Gt(d,Ot(0,0,!1))>0||h<l;){if(h>s)throw new Error("scaleSubInPlace: pre-condition did not apply, result would be -ve");let t=0|~~Tt(kt(d,dn)),e=Mt(d,hn);t<fn-u[h+r]?u[h+r]=u[h+r]+t:(u[h+r]=t-(fn-u[h+r]),e=It(e,Ot(1,0,!1))),d=h<l?It(e,Nt(f,jt(a[h+1],!1,2))):e,h+=1}mn(o)}function Dn(t,e,n){const r=[bn(e),bn(t)],o=0|r[1],i=0|r[0];if(o<i+n)return 0;{const r=[e.digits,t.digits],l=r[1],a=r[0];let f;if(0===i)if(o===n)f=~~(l[n]/a[0]);else{const t=Mt(It(Nt(jt(l[o],!1,2),hn),jt(l[o-1],!1,2)),jt(a[0],!1,2));f=~~Tt(t)}else if(o===i+n)f=~~(l[o]/(a[i]+1));else{const t=Mt(It(Nt(jt(l[o],!1,2),hn),jt(l[o-1],!1,2)),It(jt(a[i],!1,2),Ot(1,0,!1)));f=~~Tt(t)}return 0===f?1!=(u=n,c=t,0,(s=e).bound+u<c.bound+0?-1:s.bound+u>c.bound+u?1:0|((t,e,n)=>{t:for(;;){const r=t,o=e,i=n;if(-1===i)return 0;{const s=0|(i<u?0:r[i-u]),c=0|(i<0?0:o[i-0]);if(s===c){t=r,e=o,n=i-1;continue t}return s<c?-1:1}}})(s.digits,c.digits,s.bound+u-1))?1:0:0|f}var s,u,c}function kn(t){return pn(t)}function Gn(t){const e=0|bn(t),n=((t,n,r)=>{for(;;){const o=t,i=n,s=r;if(bn(s)>e)return ae([i,s],o);t=ae([i,s],o),n=i+1,r=In(s,s)}})(le(),0,pn(10)),r=(t,e,n,o)=>{if(he(o)){const r=0|function(t){if(1===t.bound)return 0|t.digits[0];{let e=0;for(let n=t.bound-1;n>=0;n--)e=t.digits[n]+fn*e;return 0|e}}(n);return t&&0===r?e:ae(c(r),e)}{const i=ge(o)[1],s=me(o),u=function(t,e){if(Cn(e))throw new Error;if(bn(t)<bn(e))return[yn,t];{const n=function(t){return new nn(t.bound,t.digits.slice())}(t),r=gn(bn(t)-bn(e)+1+1);let o=0|bn(t);const i=0|bn(e);let s=o-i|0;const u=t=>{};let c=!1;for(;!c;){u([r,n,s,o]);const t=0|Dn(n,e,s);t>0?(Nn(n,t,e,s),Mn(r,t,wn,s),u([r,n,s,o])):(c=0===t&&0===s,c||(o===i+s?(u([r,n,s-1,o]),s-=1):(u([r,n,s-1,o-1]),s-=1,o-=1)))}return[mn(r),mn(n)]}}(n,i),c=u[1],l=u[0];if(t&&Cn(l))return r(t,e,c,s);{const n=r(!1,e,c,s);return r(t,n,l,s)}}},o=n,i=r(!0,le(),t,o);return he(i)?"0":Qt("",function(t){const e=0|se(t),n=(r=new Array(e),o=e,r.fill(null,0,0+o));var r,o;return((t,e)=>{for(;;){const r=t,o=e;if(null==o.tail)break;n[r]=ue(o),t=r+1,e=ce(o)}})(0,t),n}(i))}function On(t){const e=t;return 0<e.bound?0|e.digits[0]:0}re(24,(t=>an(2,t)-1),Int32Array),re(24,(t=>an(2,t)),Int32Array),re(24,(t=>ln(Ot(2,0,!1),t))),_n[0].bigN,pn(2);var Tn={GetHashCode(){return h([this.s,this.e].concat(this.c))},Equals(t){return!this.cmp(t)},CompareTo(t){return this.cmp(t)},[A](){const t=this;return{multiply:e=>t.mul(e),toPrecision:e=>t.toPrecision(e),toExponential:e=>t.toExponential(e),toFixed:e=>t.toFixed(e),toHex:()=>(Number(t)>>>0).toString(16)}}},An=1e6,jn="[big.js] ",Ln=jn+"Invalid ",Rn=Ln+"decimal places",Hn=Ln+"rounding mode",Un=jn+"Division by zero",Fn=void 0,qn=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Bn(t,e){var n,r,o;if(0===e&&1/e<0)e="-0";else if(!qn.test(e+=""))throw Error(Ln+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),o=e.length,r=0;r<n&&r<o&&"0"==e.charAt(r);)++r;if(r==o)t.c=[t.e=0];else for(t.e=n-r-1,t.c=[],n=0;r<o;)t.c[n++]=+e.charAt(r++);return zn(t,Jn.DP,Jn.RM)}function zn(t,e,n,r){var o=t.c,i=t.e+e+1;if(i<o.length){if(1===n)r=o[i]>=5;else if(2===n)r=o[i]>5||5==o[i]&&(r||i<0||o[i+1]!==Fn||1&o[i-1]);else if(3===n){const t=o.findIndex(((t,e)=>e>=i&&t>0))<0;r=r||!t}else if(r=!1,0!==n)throw Error(Hn);if(i<1)o.length=1,r?(t.e=-e,o[0]=1):o[0]=t.e=0;else{if(o.length=i--,r)for(;++o[i]>9;)o[i]=0,i--||(++t.e,o.unshift(1));for(i=o.length;!o[--i];)o.pop()}}else if(n<0||n>3||n!==~~n)throw Error(Hn);return t}function Wn(t,e,n,r){var o,i,s=t.constructor,u=!t.c[0];if(n!==Fn){if(n!==~~n||n<(3==e)||n>An)throw Error(3==e?Ln+"precision":Rn);for(n=r-(t=new s(t)).e,t.c.length>++r&&zn(t,n,s.RM),2==e&&(r=t.e+n+1);t.c.length<r;)t.c.push(0)}if(o=t.e,n=(i=t.c.join("")).length,2!=e&&(1==e||3==e&&r<=o||o<=s.NE||o>=s.PE))i=i.charAt(0)+(n>1?"."+i.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)i="0"+i;i="0."+i}else if(o>0)if(++o>n)for(o-=n;o--;)i+="0";else o<n&&(i=i.slice(0,o)+"."+i.slice(o));else n>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&(!u||4==e)?"-"+i:i}Tn.abs=function(){var t=new this.constructor(this);return t.s=1,t},Tn.cmp=function(t){var e,n=this.constructor,r=new n(this),o=(t=new n(t),r.c),i=t.c,s=r.s,u=t.s,c=r.e,l=t.e;if(!o[0]||!i[0])return o[0]?s:i[0]?-u:0;if(s!=u)return s;if(e=s<0,c!=l)return c>l^e?1:-1;for(u=Math.max(o.length,i.length),s=0;s<u;s++)if((c=s<o.length?o[s]:0)!=(l=s<i.length?i[s]:0))return c>l^e?1:-1;return 0},Tn.div=function(t){var e=this.constructor,n=new e(this),r=(t=new e(t),n.c),o=t.c,i=n.s==t.s?1:-1,s=e.DP;if(s!==~~s||s<0||s>An)throw Error(Rn);if(!o[0])throw Error(Un);if(!r[0])return new e(0*i);var u,c,l,a,f,h=o.slice(),d=u=o.length,g=r.length,m=r.slice(0,u),p=m.length,w=t,y=w.c=[],b=0,C=s+(w.e=n.e-t.e)+1;for(w.s=i,i=C<0?0:C,h.unshift(0);p++<u;)m.push(0);do{for(l=0;l<10;l++){if(u!=(p=m.length))a=u>p?1:-1;else for(f=-1,a=0;++f<u;)if(o[f]!=m[f]){a=o[f]>m[f]?1:-1;break}if(!(a<0))break;for(c=p==u?o:h;p;){if(m[--p]<c[p]){for(f=p;f&&!m[--f];)m[f]=9;--m[f],m[p]+=10}m[p]-=c[p]}for(;!m[0];)m.shift()}y[b++]=a?l:++l,m[0]&&a?m[p]=r[d]||0:m=[r[d]]}while((d++<g||m[0]!==Fn)&&i--);return y[0]||1==b||(y.shift(),w.e--),b>C&&zn(w,s,e.RM,m[0]!==Fn),w},Tn.eq=function(t){return!this.cmp(t)},Tn.gt=function(t){return this.cmp(t)>0},Tn.gte=function(t){return this.cmp(t)>-1},Tn.lt=function(t){return this.cmp(t)<0},Tn.lte=function(t){return this.cmp(t)<1},Tn.minus=Tn.sub=function(t){var e,n,r,o,i=this.constructor,s=new i(this),u=(t=new i(t),s.s),c=t.s;if(u!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),a=s.e,f=t.c,h=t.e;if(!l[0]||!f[0])return f[0]?(t.s=-c,t):new i(l[0]?s:0);if(u=a-h){for((o=u<0)?(u=-u,r=l):(h=a,r=f),r.reverse(),c=u;c--;)r.push(0);r.reverse()}else for(n=((o=l.length<f.length)?l:f).length,u=c=0;c<n;c++)if(l[c]!=f[c]){o=l[c]<f[c];break}if(o&&(r=l,l=f,f=r,t.s=-t.s),(c=(n=f.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>u;){if(l[--n]<f[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=f[n]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t},Tn.mod=function(t){var e,n=this.constructor,r=new n(this),o=(t=new n(t),r.s),i=t.s;if(!t.c[0])throw Error(Un);return r.s=t.s=1,e=1==t.cmp(r),r.s=o,t.s=i,e?new n(r):(o=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=o,n.RM=i,this.minus(r.times(t)))},Tn.plus=Tn.add=function(t){var e,n=this.constructor,r=new n(this),o=(t=new n(t),r.s),i=t.s;if(o!=i)return t.s=-i,r.minus(t);var s=r.e,u=r.c,c=t.e,l=t.c;if(!u[0]||!l[0])return l[0]?t:new n(u[0]?r:0*o);if(u=u.slice(),o=s-c){for(o>0?(c=s,e=l):(o=-o,e=u),e.reverse();o--;)e.push(0);e.reverse()}for(u.length-l.length<0&&(e=l,l=u,u=e),o=l.length,i=0;o;u[o]%=10)i=(u[--o]=u[o]+l[o]+i)/10|0;for(i&&(u.unshift(i),++c),o=u.length;0===u[--o];)u.pop();return t.c=u,t.e=c,t},Tn.pow=function(t){var e=this.constructor,n=new e(this),r=new e(1),o=new e(1),i=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(Ln+"exponent");for(i&&(t=-t);1&t&&(r=r.times(n)),t>>=1;)n=n.times(n);return i?o.div(r):r},Tn.round=function(t,e){var n=this.constructor;if(t===Fn)t=0;else if(t!==~~t||t<-An||t>An)throw Error(Rn);return zn(new n(this),t,e===Fn?n.RM:e)},Tn.sqrt=function(){var t,e,n,r=this.constructor,o=new r(this),i=o.s,s=o.e,u=new r(.5);if(!o.c[0])return new r(o);if(i<0)throw Error(jn+"No square root");0===(i=Math.sqrt(o+""))||i===1/0?((e=o.c.join("")).length+s&1||(e+="0"),s=((s+1)/2|0)-(s<0||1&s),t=new r(((i=Math.sqrt(e))==1/0?"1e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+s)):t=new r(i),s=t.e+(r.DP+=4);do{n=t,t=u.times(n.plus(o.div(n)))}while(n.c.slice(0,s).join("")!==t.c.slice(0,s).join(""));return zn(t,r.DP-=4,r.RM)},Tn.times=Tn.mul=function(t){var e,n=this.constructor,r=new n(this),o=(t=new n(t),r.c),i=t.c,s=o.length,u=i.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!o[0]||!i[0])return new n(0*t.s);for(t.e=c+l,s<u&&(e=o,o=i,i=e,l=s,s=u,u=l),e=new Array(l=s+u);l--;)e[l]=0;for(c=u;c--;){for(u=0,l=s+c;l>c;)u=e[l]+i[c]*o[l-c-1]+u,e[l--]=u%10,u=u/10|0;e[l]=(e[l]+u)%10}for(u?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},Tn.toExponential=function(t){return Wn(this,1,t,t)},Tn.toFixed=function(t){return Wn(this,2,t,this.e+t)},Tn.toPrecision=function(t){return Wn(this,3,t,t-1)},Tn.toString=function(){return Wn(this)},Tn.valueOf=Tn.toJSON=function(){return Wn(this,4)};var Jn=function t(){function e(n){var r=this;if(!(r instanceof e))return n===Fn?t():new e(n);n instanceof e?(r.s=n.s,r.e=n.e,r.c=n.c.slice(),function(t){if((t=zn(t,28,0)).c.length>1&&!t.c[0]){let e=t.c.findIndex((t=>t));t.c=t.c.slice(e),t.e=t.e-e}}(r)):Bn(r,n),r.constructor=e}return e.prototype=Tn,e.DP=28,e.RM=1,e.NE=-29,e.PE=29,e.version="5.2.2",e}();const Zn=Jn;new Zn(0),new Zn(1),new Zn(-1),new Zn("79228162514264337593543950335"),new Zn("-79228162514264337593543950335");class $n extends _{constructor(t,e){super(),this.signInt=t,this.v=e}toString(){const t=this;switch(0|Yn(t)){case-1:return Cn(Kn(t))?"0":"-"+Gn(Kn(t));case 0:return"0";case 1:return Gn(Kn(t));default:throw new Error("signs should be +/- 1 or 0")}}Equals(t){return t instanceof $n&&Qn(this,t)}GetHashCode(){return 0|(0===Yn(this)?1:Yn(this)+function(t){let e=0;for(let n=0;n<=t.bound-1;n++)e=t.digits[n]+(e<<3);return 0|e}(Kn(this))|0)}CompareTo(t){if(t instanceof $n)return 0|(function(t,e){const n=[Yn(t),Yn(e)];let r;switch(r=-1===n[0]?-1===n[1]?1:0===n[1]?8:1===n[1]?3:9:0===n[0]?-1===n[1]?6:0===n[1]?4:1===n[1]?5:9:1===n[0]?-1===n[1]?2:0===n[1]?7:1===n[1]?0:9:9,r){case 0:return Sn(Kn(t),Kn(e));case 1:return Sn(Kn(e),Kn(t));case 2:return!1;case 3:return!Cn(Kn(t))||!Cn(Kn(e));case 4:return!1;case 5:return!Cn(Kn(e));case 6:case 7:return!1;case 8:return!Cn(Kn(t));case 9:throw new Error("signs should be +/- 1 or 0\\nParameter name: x")}}(this,e=t)?-1:Qn(this,e)?0:1);throw new Error("the objects are not comparable\\nParameter name: obj");var e}}function Vn(t,e){return new $n(t,e)}function Xn(t){return function(t){return t.bound<=1}(t)&&On(t)<$n.smallLim?$n.smallPosTab[On(t)]:t}function Yn(t){return t.signInt}function Kn(t){return t.v}function Qn(t,e){const n=[Yn(t),Yn(e)];let r;switch(r=-1===n[0]?-1===n[1]?1:0===n[1]?8:1===n[1]?3:9:0===n[0]?-1===n[1]?6:0===n[1]?4:1===n[1]?5:9:1===n[0]?-1===n[1]?2:0===n[1]?7:1===n[1]?0:9:9,r){case 0:case 1:return o=Kn(t),i=Kn(e),o.bound===i.bound&&((t,e,n)=>{for(;;){const r=t,o=e,i=n;if(-1===i)return!0;if(r[i]!==o[i])return!1;t=r,e=o,n=i-1}})(o.digits,i.digits,o.bound-1);case 2:case 3:return!!Cn(Kn(t))&&Cn(Kn(e));case 4:return!0;case 5:case 6:return Cn(Kn(e));case 7:case 8:return Cn(Kn(t));case 9:throw new Error("signs should be +/- 1 or 0\\nParameter name: x")}var o,i}function tr(t){return t>=0?Vn(1,Xn(kn(t))):Vn(-1,Xn(-2147483648===t?function(t){return function(t){const e=Gt(t,Ot(0,0,!1))<0?Ot(0,0,!1):t,n=gn(3);for(let t=0;t<=2;t++)n.digits[t]=~~Tt((r=Mt(e,ln(hn,t)),o=hn,z(o)||(o=K(o)),q?V((r.unsigned?q.rem_u:q.rem_s)(r.low,r.high,o.low,o.high),q.get_high(),r.unsigned):xt(r,Pt(_t(r,o),o))));var r,o;return mn(n)}(t)}(Dt(jt(t,!1,2))):kn(-2147483648===(e=t)?e:-e)));var e}function er(){return $n.one}function nr(){return $n.zero}function rr(t){return{Dispose(){t()}}}function or(){return function(t){let e=0;return()=>{const t=0|e;return e+=1,0|t}}()}function ir(){return"undefined"!=typeof window?window.document:null}$n.smallLim=4096,$n.smallPosTab=re($n.smallLim,(t=>kn(t))),$n.one=tr(1),$n.two=tr(2),$n.zero=tr(0),nr(),er(),$n.two,nr(),er();const sr=t=>{tn("dom",t)};function ur(t,e,n){null!=t&&t.dispatchEvent(new CustomEvent(e,n))}function cr(t,e){ur(t,e,{})}function lr(t,e,n){const r=function(t,e){const n=t[e];return null==n?void 0:v(n)}(t,e);if(null==r){const r=n();return t[e]=r,r}return E(r)}const ar=or();function fr(t){return 1===t.nodeType}function hr(t,e){fr(e)&&t(e)}function dr(t,e){var n;(n=t.ownerDocument,lr(n.body,"__sutil_nodes",(()=>({}))))[x(e)]=t,t._svid=e,fr(t)&&t.setAttribute("_svid",x(e))}function gr(t){return t._svid}function mr(t){if(null==t)return"null";{let e=t.textContent;switch(e.length>80&&(e=ee(e,0,80)),t.nodeType){case 1:return Vt($t('<%P()>#%P() "%P()"',[t.tagName.toLocaleLowerCase(),gr(t),e]));case 3:return Vt($t('"%P()"#%P()',[e,gr(t)]));default:return Vt($t("?'%P()'#%P()",[e,gr(t)]))}}}function pr(t){if(null==t)return"null";{let e=t.textContent;switch(e.length>16&&(e=ee(e,0,16)+"..."),t.nodeType){case 1:return Vt($t("<%P()> #%P()",[t.tagName.toLocaleLowerCase(),gr(t)]));case 3:return Vt($t('text:"%P()" #%P()',[e,gr(t)]));default:return Vt($t("?'%P()'#%P()",[e,gr(t)]))}}}function wr(t){window.hasOwnProperty("domeditlog")?window.domeditlog(t):tn("dom",t)}function yr(t,e){wr(Vt($t("removeChild parent='%P()' child='%P()'",[pr(t),pr(e)]))),t.removeChild(e)}function br(t,e,n){wr(Vt($t("insertBefore parent='%P()' child='%P()' refNode='%P()'",[pr(t),pr(e),pr(n)]))),t.insertBefore(e,n)}function Cr(t){const e=t=>ke((()=>null!=t?Ae(Oe(t),ke((()=>e(t.nextSibling)))):ke((()=>new Array(0)))));return e(t.firstChild)}function Sr(t){return ke((()=>He((t=>Ae(Oe(t),ke((()=>Sr(t))))),Cr(t))))}function vr(t){return ke((()=>He((t=>Ae(Sr(t),ke((()=>Oe(t))))),Cr(t))))}function Er(t){const e=function(t){return function(t){return t.hasOwnProperty("__sutil_disposables")}(t)?t.__sutil_disposables:le()}(t);sr(Vt($t("cleanup %P() - %P() disposable(s)",[mr(t),de(e)]))),ye((e=>{try{e.Dispose()}catch(n){en(Vt($t("Disposing %P(): %P() from %P()",[e,n,mr(t)])))}}),e),function(t){delete t.__sutil_disposables}(t),cr(t,"sutil-unmount")}function xr(t,e){if(!t)throw new Error(e)}function Pr(t){var e;e=e=>{try{t()}catch(t){en(Vt($t("rafu: %P()",[t.message])))}},"undefined"!=typeof window&&window.requestAnimationFrame(e)}function _r(t,e){switch(t.tag){case 0:{const n=t.fields[0];return e.tagName===n}case 1:{const n=t.fields[0];return e.classList.contains(n)}case 2:{const n=t.fields[0];return e.id===n}case 5:{const n=t.fields[2],r=t.fields[0],o=t.fields[1];return!!_r(r,e)&&e.getAttribute(o)===n}case 3:return we(((t,n)=>!!t&&_r(n,e)),!0,t.fields[0]);case 4:return we(((t,n)=>!!t||_r(n,e)),!1,t.fields[0]);default:return!1}}class Ir extends P{constructor(t,...e){super(),this.tag=0|t,this.fields=e}cases(){return["EmptyNode","DomNode","GroupNode"]}toString(){const t=this;switch(t.tag){case 1:return pr(t.fields[0]);case 2:return x(t.fields[0]);default:return"EmptyNode"}}}class Nr{constructor(t,e,n){const r=new I(null);this._name=t,this._parent=e,r.contents=this,this.id=c(ar()),this._dispose=()=>{},this._children=le(),this._prev=n,this["init@580"]=1;const o=Vr(this),i=lr(o,"__sutil_groups",le);o.__sutil_groups=Se(i,fe(r.contents))}toString(){const t=this;return t._name+"["+Qt(",",ve((t=>x(t)),t._children))+"]#"+t.id}}function Mr(t,e,n){switch(t.tag){case 1:return e(t.fields[0]);case 2:return function(t,e){return e(Vr(t))}(t.fields[0],e);default:return n}}function Dr(t){switch(t.tag){case 1:return gr(t.fields[0]);case 2:return Jr(t.fields[0]);default:return"-"}}function kr(t,e){const n=[t,e];let r,o,i,s,u;switch(1===n[0].tag?1===n[1].tag?(r=1,o=n[0].fields[0],i=n[1].fields[0]):r=3:2===n[0].tag?2===n[1].tag?(r=2,s=n[0].fields[0],u=n[1].fields[0]):r=3:r=0===n[1].tag?0:3,r){case 0:return!0;case 1:return o.isSameNode(i);case 2:return Jr(s)===Jr(u);case 3:return!1}}function Gr(t){switch(t.tag){case 1:{const e=t.fields[0];return new Ir(1,e.previousSibling)}case 2:return Hr(t.fields[0]);default:return new Ir(0)}}function Or(t){return Tr(t)}function Tr(t){switch(t.tag){case 1:return fe(t.fields[0]);case 2:return Fr(t.fields[0]);default:return le()}}function Ar(t){return Mr(t,(t=>t),null)}function jr(t,e,n){switch(t.tag){case 1:{const r=t.fields[0],o=function(t){switch(t.tag){case 1:{const e=t.fields[0];return null==e?null:e.nextSibling}case 2:return Br(t.fields[0]);default:return null}}(n);ye((t=>{br(r,t,o)}),Or(e));break}case 2:!function(t,e,n){!function(t,e,n){const r=function(t){switch(t.tag){case 1:return t.fields[0];case 2:return function(t){const e=function(t){const e=Fr(t);return he(e)?null:(me(e),ge(e))}(t);return p(e,null)?Br(t):e}(t.fields[0]);default:return null}}(n);sr(Vt($t("InsertBefore: child='%P()' before '%P()' refDomNode='%P()' child.PrevNode='%P()'",[e,n,pr(r),Gr(e)])));const i=Vr(t),s=0|de(t._children),u=o(Or(e));try{for(;u["System.Collections.IEnumerator.MoveNext"]();)br(i,u["System.Collections.Generic.IEnumerator`1.get_Current"](),r)}finally{u.Dispose()}p(n,new Ir(0))?Wr(t,e):(t._children=we(((t,r)=>{let o;if(o=r,kr(o,n)){const n=r;return Se(t,Se(fe(e),fe(n)))}return Se(t,fe(r))}),le(),t._children),zr(t,e)),$r(t),sr(Vt($t("InsertBefore: child='%P()' refNode='%P()' child.PrevNode='%P()'",[e,pr(r),Gr(e)]))),de(t._children)===s&&sr(Vt($t("Error: Child was not added",[])))}(t,e,function(t,e){return sr(Vt($t("ChildAfter: %P() children=%P()",[e,Zr(t)]))),0===e.tag?function(t){const e=t._children;return he(e)?new Ir(0):(me(e),ge(e))}(t):(t=>{let n,r,o;t:for(;;){const i=t;let s,u;switch(he(i)?s=0:he(me(i))?(o=ge(i),kr(o,e)?(s=1,u=ge(i)):s=2):s=2,s){case 0:return sr(Vt($t("Did not find %P()",[e]))),new Ir(0);case 1:return sr(Vt($t("Found %P() at end of list -> EmptyNode",[u]))),new Ir(0);case 2:{let o,s,u;switch(he(i)||he(me(i))?o=1:(n=ge(me(i)),r=ge(i),kr(r,e)?(o=0,s=ge(i),u=ge(me(i))):o=1),o){case 0:return sr(Vt($t("Found %P() after %P()",[u,s]))),u;case 1:if(he(i))throw new Error("Match failure");{const n=me(i),r=ge(i);sr(Vt($t("Found %P() but not equal to %P()",[r,e]))),t=n;continue t}}}}break}})(t._children)}(t,n))}(t.fields[0],e,n)}}function Lr(t,e,n,r){switch(sr(Vt($t("ReplaceGroup(%P(), %P())",[e,n]))),t.tag){case 1:!function(t,e,n){let r;sr(Vt($t("ReplaceGroup: nodes %P() existing %P()",[de(e),de(n)])));const o=he(n)?null:he(me(n))?(r=ge(n),r.nextSibling):pe(n).nextSibling;ye((e=>{let n,r,o;(function(t){Array.from(vr(t)).forEach((t=>{Er(t)})),Er(t)})(e),null==(n=e,n.parentNode)?sr(Vt($t("Warning: Node %P() was unmounted unexpectedly",[mr(e)]))):(t.isSameNode((r=e,r.parentNode))||sr(Vt($t("Warning: Node %P() has unexpected parent",[mr(e)]))),yr((o=e,o.parentNode),e))}),n),ye((e=>{br(t,e,o)}),e)}(t.fields[0],Or(e),Or(n));break;case 2:!function(t,e,n,r){const o=Or(e);xr(!p(e,new Ir(0)),"Empty child for replace child"),p(n,new Ir(0))||(xr(null!=function(t,e){return((e,n)=>{for(;;){const r=e,o=n;if(null==o.tail)return;if(t(ue(o)))return r;e=r+1,n=ce(o)}})(0,e)}((t=>Dr(t)===Dr(n)),t._children),"Child not found"),function(t,e){switch(t.tag){case 1:dr(t.fields[0],e);break;case 2:n=t.fields[0],r=e,n.id=r}var n,r}(e,Dr(n)));const i=Vr(t);ye((t=>{br(i,t,r)}),o),ye((t=>{null==t.parentNode?sr(Vt($t("Node has no parent: %P()",[pr(t)]))):yr(t.parentNode,t)}),Or(n)),null==r||p(n,new Ir(0))?Wr(t,e):(zr(t,e),t._children=ve((t=>Dr(t)===Dr(n)?e:t),t._children)),$r(t)}(t.fields[0],e,n,r)}}function Rr(t){return t._parent}function Hr(t){return t._prev}function Ur(t,e){t._prev=e}function Fr(t){return function(t,e){const n=new oe(null,void 0);let r=n,o=e;for(;null!=o.tail;){let t=Tr(ue(o));for(;null!=t.tail;){const e=r,n=new oe(ue(t),void 0);e.tail=n,r=n,t=ce(t)}o=ce(o)}const i=r,s=new oe(null,void 0);return i.tail=s,ce(n)}(0,t._children)}function qr(t){const e=Hr(t);switch(e.tag){case 2:return function(t){const e=Fr(t);return he(e)?null:pe(e)}(e.fields[0]);case 0:{const e=Rr(t);return 2===e.tag?qr(e.fields[0]):null}default:return e.fields[0]}}function Br(t){const e=Fr(t);if(he(e)){const e=qr(t);if(p(e,null)){const e=Vr(t);return p(e,null)?null:e.firstChild}return e.nextSibling}{const t=pe(e);return p(t,null)?null:t.nextSibling}}function zr(t,e){1===e.tag&&function(t,e){e.__sutil_snode=t}(t,e.fields[0])}function Wr(t,e){zr(t,e),t._children=Se(t._children,fe(e)),$r(t)}function Jr(t){return t.id}function Zr(t){return ve((t=>x(t)),t._children)}function $r(t){sr(Vt($t("updating children %P()",[Zr(t)])));let e=new Ir(0);const n=o(t._children);try{for(;n["System.Collections.IEnumerator.MoveNext"]();){const t=n["System.Collections.Generic.IEnumerator`1.get_Current"]();2===t.tag&&Ur(t.fields[0],e),e=t}}finally{n.Dispose()}}function Vr(t){return(t=>{t:for(;;){const e=t;switch(e.tag){case 1:return e.fields[0];case 2:t=Rr(e.fields[0]);continue t;default:return null}break}})(t._parent)}class Xr extends P{constructor(t,...e){super(),this.tag=0|t,this.fields=e}cases(){return["Append","Replace"]}}class Yr extends _{constructor(t,e,n,r,o,i,s){super(),this.Document=t,this.Parent=e,this.Previous=n,this.Action=r,this.MakeName=o,this.Debug=i,this.StyleSheet=s}}function Kr(t,e){const n=t.Action;if(1===n.tag){const r=n.fields[1],o=n.fields[0];sr(Vt($t("ctx.Replace '%P()' with '%P()' before '%P()'",[o,e,pr(r)]))),Lr(t.Parent,e,o,r)}else sr(Vt($t("ctx.Append '%P()' to '%P()' after %P()",[e,t.Parent,t.Previous]))),jr(t.Parent,e,t.Previous)}class Qr extends _{constructor(t){super(),this.Builder=t}}function to(t){return new Qr(t)}function eo(t,e){return new Yr(e.Document,e.Parent,t,e.Action,e.MakeName,e.Debug,e.StyleSheet)}function no(t){return new Ir(1,t)}function ro(t,e){return t.Debug?new Ir(1,(()=>{const n=t.Document.createTextNode(e),r=t.Document.createElement("div");return i=n,wr(Vt($t("appendChild parent='%P()' child='%P()'",[pr(o=r),pr(i)]))),o.appendChild(i),Kr(t,new Ir(1,r)),r;var o,i})()):new Ir(0)}function oo(t,e){return _r(e.Selector,t)}function io(t){for(;;){const e=t,n=e.Parent;if(null==n)return e;t=n}}function so(t,e){let n,r,i,s,u,c;const l=o(Ee((t=>oo(e,t)),t.StyleSheet));try{for(;l["System.Collections.IEnumerator.MoveNext"]();){const a=o(Ee((t=>{const e=t[0];return t[1],0===e.indexOf("sutil")}),l["System.Collections.Generic.IEnumerator`1.get_Current"]().Style));try{for(;a["System.Collections.IEnumerator.MoveNext"]();){const o=a["System.Collections.Generic.IEnumerator`1.get_Current"]();if(n=o[1],r=o[0],"sutil-use-global"===r){o[1],o[0];const n=io(t);n.Name!==t.Name&&(e.classList.add(n.Name),so(n,e))}else if(i=o[1],s=o[0],"sutil-use-parent"===s)o[1],o[0];else if(u=o[1],c=o[0],"sutil-add-class"===c){const t=o[1];o[0],e.classList.add(x(t))}else sr(Vt($t("Unimplemented: %P()",[o[0]])))}}finally{a.Dispose()}}}finally{l.Dispose()}}function uo(t,e){const n=t.Builder(e);return ye((t=>{cr(t,"sutil-mount")}),Or(n)),n}function co(t){return function(t,e,n,r){if(r="number"==typeof r?r:void 0,(n="number"==typeof n?n:void 0)&&n<0)throw new Error("Count cannot be less than zero");if(0===n)return[];if(!Array.isArray(e)){if(0===r)return t.split(e,n);const o=arguments.length;e=Array(o-1);for(let t=1;t<o;t++)e[t-1]=arguments[t]}e=(e=e.map((t=>qt(t)))).length>0?e:[" "];let o=0;const i=[],s=new RegExp(e.join("|"),"g");for(;null==n||n>1;){const e=s.exec(t);if(null===e)break;(!r||e.index-o>0)&&(n=null!=n?n-1:n,i.push(t.substring(o,e.index))),o=s.lastIndex}return(!r||t.length-o>0)&&i.push(t.substring(o)),i}(t,[" "],null,1)}function lo(t,e){return to((n=>{let r,o;const i=Ar(n.Parent);try{const r=i;!function(t,e,n){const r=x(n);var o;"class"===e?(o=r,t.classList.add(...co(o))):"class-"===e?function(t,e){e.classList.remove(...co(t))}(r,t):"false"!==r||"disabled"!==e&&"readonly"!==e&&"required"!==e?"value"===e?(t.__value=n,t.value=r):t.setAttribute(e,r):t.removeAttribute(e)}(r,t,e);const o=n.StyleSheet;null==o||so(o,r)}catch(e){throw new Error((r=i.tagName,o=i.nodeType,Vt(Zt("Cannot set attribute %s on a %A %f %s"))(t)(i)(o)(r)))}return ro(n,"attr")}))}function ao(t,e){const n=e.Parent;let r=new Ir(0);const i=o(t);try{for(;i["System.Collections.IEnumerator.MoveNext"]();){const t=uo(i["System.Collections.Generic.IEnumerator`1.get_Current"](),eo(r,e));0===t.tag||(r=t)}}finally{i.Dispose()}const s=e.StyleSheet;if(null==s);else{const t=s;u=n,c=t.Name,function(t,e){Mr(t,(t=>{hr(e,t)}),void 0)}(u,(t=>{t.classList.add(c)})),hr((e=>{so(t,e)}),Ar(n))}var u,c}function fo(t){return to((e=>{sr(Vt($t("fragment %P()",[e.Action])));const n=("fragment",r=e.Parent,o=e.Previous,new Nr("fragment",r,o));var r,o;const i=new Ir(2,n);Kr(e,i);const s=new Yr(e.Document,i,e.Previous,new Xr(0),e.MakeName,e.Debug,e.StyleSheet);return ao(t,s),i}))}function ho(t){return to((e=>{const n=function(t,e){const n=0|ar();sr(Vt($t('create "%P()" #%P()',[e,n])));const r=t.createTextNode(e);return dr(r,n),r}(e.Document,t);return Kr(e,new Ir(1,n)),no(n)}))}function go(t){tn("store",t)}Vt(Zt("#%s")),Vt(Zt(".%s"));const mo=C(0),po=new Map([]),wo=new Map([]);class yo{constructor(t,e){this.init=t,this.dispose=e,this.uid=0,this._modelInitialized=!1,this._model=null,this.subscribers=new Map([])}Subscribe(t){return function(t,e){const n=0|t.uid;return t.uid=t.uid+1,tn("store",Vt($t("subscribe %P()",[n]))),function(t,e,n){if(t.has(e))throw new Error("An item with the same key has already been added. Key: "+e);t.set(e,n)}(t.subscribers,n,e),e.OnNext(Co(t)),rr((()=>{tn("store",Vt($t("unsubscribe %P()",[n]))),t.subscribers.delete(n)}))}(this,t)}Update(t){!function(t,e){const n=e(Co(t));t._model=n,t.subscribers.size>0&&Le((e=>{e.OnNext(t._model)}),t.subscribers.values())}(this,t)}get Value(){return bo(this)}get Debugger(){const t=this;return new class{get Value(){return bo(t)}get NumSubscribers(){return t.subscribers.size}}}Dispose(){var t;Le((t=>{t.OnCompleted()}),(t=this).subscribers.values()),t.subscribers.clear(),t.dispose(Co(t)),t._model=null,function(t){const e=0|Ye(wo,t);go(Vt($t("dispose store #%P()",[e])));try{po.delete(e),wo.delete(t)}catch(t){en(Vt($t("disposing store %P(): %P()",[e,t.message])))}}(t)}}function bo(t){return Co(t)}function Co(t){return t._modelInitialized||(t._model=t.init(),t._modelInitialized=!0),t._model}function So(t,e){return{Subscribe(n){let r=null;const o=Ve((e=>{null!=r&&t(r,e)||(n.OnNext(e),r=e)}),e);return rr((()=>{o.Dispose()}))}}}function vo(t){return function(t,e){const n=function(t,e){return new yo(t,e)}(t,e);return function(t){if(wo.has(t))throw new Error("Store is already registered!");const e=0|mo();go(Vt($t("make store #%P()",[e]))),mo(mo()+1,!0),po.set(e,t),wo.set(t,e),cr(ir(),"sutil-new-store")}(n),Pr((()=>{Ve((t=>{!function(t,e){ur(ir(),"sutil-update-store",{Value:e})}(0,t)}),n)})),n}((()=>t),(t=>{}))}function Eo(t,e){t.Update((t=>e))}function xo(t,e){return Ve(t,e)}class Po{constructor(t,e){const n=new I(null);this.comparer=e,n.contents=this,this.hashMap=new Map([]),this["init@8-2"]=1;const r=o(t);try{for(;r["System.Collections.IEnumerator.MoveNext"]();){const t=r["System.Collections.Generic.IEnumerator`1.get_Current"]();Mo(n.contents,t)}}finally{r.Dispose()}}get[Symbol.toStringTag](){return"HashSet"}"System.Collections.IEnumerable.GetEnumerator"(){return o(this)}GetEnumerator(){return o(Ge(this.hashMap.values()))}[Symbol.iterator](){return i(this.GetEnumerator())}"System.Collections.Generic.ICollection`1.Add2B595"(t){Mo(this,t)}"System.Collections.Generic.ICollection`1.Clear"(){Io(this)}"System.Collections.Generic.ICollection`1.Contains2B595"(t){return Do(this,t)}"System.Collections.Generic.ICollection`1.CopyToZ2E171D71"(t,e){var n;n=(n,r)=>{t[e+n]=r},je(((t,e)=>(n(t,e),t+1|0)),0,this)}"System.Collections.Generic.ICollection`1.get_Count"(){return 0|No(this)}"System.Collections.Generic.ICollection`1.get_IsReadOnly"(){return!1}"System.Collections.Generic.ICollection`1.Remove2B595"(t){return ko(this,t)}get size(){return 0|No(this)}add(t){return Mo(this,t),this}clear(){Io(this)}delete(t){return ko(this,t)}has(t){return Do(this,t)}keys(){return Re((t=>t),this)}values(){return Re((t=>t),this)}entries(){return Re((t=>[t,t]),this)}forEach(t,e){const n=this;Le((e=>{t(e,e,n)}),n)}}function _o(t,e){const n=0|t.comparer.GetHashCode(e);let r,o=null;return r=[(i=t.hashMap,s=n,u=new I((()=>o),(t=>{o=t})),!!i.has(s)&&(u.contents=i.get(s),!0)),o],r[0]?[!0,n,r[1].findIndex((n=>t.comparer.Equals(e,n)))]:[!1,n,-1];var i,s,u}function Io(t){t.hashMap.clear()}function No(t){let e=0,n=o(t.hashMap.values());try{for(;n["System.Collections.IEnumerator.MoveNext"]();)e+=n["System.Collections.Generic.IEnumerator`1.get_Current"]().length}finally{n.Dispose()}return 0|e}function Mo(t,e){let n,r;const o=_o(t,e);let i;switch(o[0]?(n=0|o[2],r=0|o[1],i=n>-1?0:1):i=1,i){case 0:return o[2],o[1],!1;case 1:if(o[0]){const n=0|o[1];return Ye(t.hashMap,n).push(e),!0}{const n=0|o[1];return t.hashMap.set(n,[e]),!0}}}function Do(t,e){let n,r;const o=_o(t,e);let i;switch(o[0]?(n=0|o[2],r=0|o[1],i=n>-1?0:1):i=1,i){case 0:return o[2],o[1],!0;case 1:return!1}}function ko(t,e){let n,r;const o=_o(t,e);let i;switch(o[0]?(n=0|o[2],r=0|o[1],i=n>-1?0:1):i=1,i){case 0:{const e=0|o[2],n=0|o[1];return Ye(t.hashMap,n).splice(e,1),!0}case 1:return!1}}class Go{constructor(t,e){this.k=t,this.v=e}}function Oo(t){return t.k}function To(t){return t.v}class Ao extends Go{constructor(t,e,n,r,o){super(t,e),this.left=n,this.right=r,this.h=o}}function jo(t){return t.left}function Lo(t){return t.right}function Ro(t,e){t:for(;;){const n=t,r=e;if(null!=r){const o=r;if(o instanceof Ao){const r=o;t=Ro(n+1,jo(r)),e=Lo(r);continue t}return n+1|0}return 0|n}}function Ho(t){return Ro(0,t)}function Uo(t,e){t:for(;;){const n=t,r=e;if(null!=r){const o=r;if(o instanceof Ao){const r=o;Uo(n,jo(r)),n(Oo(r),To(r)),t=n,e=Lo(r);continue t}n(Oo(o),To(o))}break}}function Fo(t,e){Uo(t,e)}class qo extends _{constructor(t,e){super(),this.stack=t,this.started=e}}function Bo(t){t:for(;;){const r=t;if(he(r))return le();{const o=me(r),i=ge(r);if(null!=i){const s=i;if(s instanceof Ao){const r=s;t=be([jo(r),(e=Oo(r),n=To(r),new Go(e,n)),Lo(r)],o);continue t}return r}t=o;continue t}}var e,n}function zo(t){return new qo(Bo(fe(t)),!1)}function Wo(t){if(t.started){const e=t.stack;if(he(e))return function(){throw new Error("enumeration already finished")}();if(null!=ge(e)){const t=ge(e);if(t instanceof Ao)throw new Error("Please report error: Map iterator, unexpected stack for current");return[Oo(t),To(t)]}throw new Error("Please report error: Map iterator, unexpected stack for current")}return function(){throw new Error("enumeration not started")}()}function Jo(t){let e=zo(t);return{"System.Collections.Generic.IEnumerator`1.get_Current":()=>Wo(e),"System.Collections.IEnumerator.get_Current":()=>Wo(e),"System.Collections.IEnumerator.MoveNext":()=>function(t){if(t.started){const e=t.stack;if(he(e))return!1;if(null!=ge(e)){const n=ge(e),r=me(e);if(n instanceof Ao)throw new Error("Please report error: Map iterator, unexpected stack for moveNext");return t.stack=Bo(r),!he(t.stack)}throw me(e),new Error("Please report error: Map iterator, unexpected stack for moveNext")}return t.started=!0,!he(t.stack)}(e),"System.Collections.IEnumerator.Reset"(){e=zo(t)},Dispose(){}}}class Zo{constructor(t,e){this.comparer=t,this.tree=e}GetHashCode(){return 0|function(t){const e=(t,e)=>(t<<1)+e+631;let n=0;const r=o(t);try{for(;r["System.Collections.IEnumerator.MoveNext"]();){const t=r["System.Collections.Generic.IEnumerator`1.get_Current"](),o=t[1];n=e(n,d(t[0])),n=e(n,d(o))}}finally{r.Dispose()}return 0|n}(this)}Equals(t){if(!(t instanceof Zo))return!1;{const e=t,n=o(this);try{const t=o(e);try{const e=()=>{const r=n["System.Collections.IEnumerator.MoveNext"]();if(r===t["System.Collections.IEnumerator.MoveNext"]()){if(r){const r=n["System.Collections.Generic.IEnumerator`1.get_Current"](),o=t["System.Collections.Generic.IEnumerator`1.get_Current"]();return!(!p(r[0],o[0])||!p(r[1],o[1]))&&e()}return!0}return!1};return e()}finally{t.Dispose()}}finally{n.Dispose()}}}toString(){return"map ["+Qt("; ",Re((t=>function(t,...e){return"object"==typeof t&&e.length>0&&(t=e[0],e.shift()),t.replace(Wt,((t,n,r,o,i,s)=>{let u=e[n];if(j(u))switch(i=null==i?null:parseInt(i,10),o){case"f":case"F":u=R(u,i=null!=i?i:2);break;case"g":case"G":u=null!=i?H(u,i):H(u);break;case"e":case"E":u=null!=i?U(u,i):U(u);break;case"p":case"P":i=null!=i?i:2,u=R(L(u,100),i)+" %";break;case"d":case"D":u=null!=i?te(String(u),i,"0"):String(u);break;case"x":case"X":u=null!=i?te(F(u),i,"0"):F(u),"X"===o&&(u=u.toUpperCase());break;default:if(s){let t="";u=s.replace(/(0+)(\.0+)?/,((e,n,r)=>(Jt(u,0)&&(u=L(u,-1),t="-"),u=R(u,null!=r?r.length-1:0),te(u,(n||"").length-t.length+(null!=r?r.length:0),"0")))),u=t+u}}else u=u instanceof Date?Ut(u,s||o):x(u);return r=parseInt((r||" ").substring(1),10),isNaN(r)||(u=te(String(u),Math.abs(r)," ",r<0)),u}))}("({0}, {1})",t[0],t[1])),this))+"]"}get[Symbol.toStringTag](){return"FSharpMap"}GetEnumerator(){return Jo(this.tree)}[Symbol.iterator](){return i(this.GetEnumerator())}"System.Collections.IEnumerable.GetEnumerator"(){return Jo(this.tree)}CompareTo(t){const e=this;if(t instanceof Zo)return 0|function(t,e,n){const r=De(e);try{const e=De(n);try{let n=0,o=r["System.Collections.IEnumerator.MoveNext"](),i=e["System.Collections.IEnumerator.MoveNext"]();for(;0===n&&o&&i;)n=t(r["System.Collections.Generic.IEnumerator`1.get_Current"](),e["System.Collections.Generic.IEnumerator`1.get_Current"]()),0===n&&(o=r["System.Collections.IEnumerator.MoveNext"](),i=e["System.Collections.IEnumerator.MoveNext"]());return 0|(0!==n?n:o?1:i?-1:0)}finally{e.Dispose()}}finally{r.Dispose()}}(((t,n)=>{const r=0|e.comparer.Compare(t[0],n[0]);return 0|(0!==r?r:b(t[1],n[1]))}),e,t);throw new Error("not comparable\\nParameter name: obj")}"System.Collections.Generic.ICollection`1.Add2B595"(t){throw new Error("Map cannot be mutated")}"System.Collections.Generic.ICollection`1.Clear"(){throw new Error("Map cannot be mutated")}"System.Collections.Generic.ICollection`1.Remove2B595"(t){throw new Error("Map cannot be mutated")}"System.Collections.Generic.ICollection`1.Contains2B595"(t){return!!Xo(this,t[0])&&p($o(this,t[0]),t[1])}"System.Collections.Generic.ICollection`1.CopyToZ2E171D71"(t,e){!function(t,e,n){let r=0|n;Fo(((t,n)=>{e[r]=[t,n],r+=1}),t)}(this.tree,t,e)}"System.Collections.Generic.ICollection`1.get_IsReadOnly"(){return!0}"System.Collections.Generic.ICollection`1.get_Count"(){return 0|Vo(this)}"System.Collections.Generic.IReadOnlyCollection`1.get_Count"(){return 0|Vo(this)}get size(){return 0|Vo(this)}clear(){throw new Error("Map cannot be mutated")}delete(t){throw new Error("Map cannot be mutated")}entries(){return Re((t=>[t[0],t[1]]),this)}get(t){return $o(this,t)}has(t){return Xo(this,t)}keys(){return Re((t=>t[0]),this)}set(t,e){throw new Error("Map cannot be mutated")}values(){return Re((t=>t[1]),this)}forEach(t,e){const n=this;Le((e=>{t(e[1],e[0],n)}),n)}}function $o(t,e){return function(t,e,n){const r=function(t,e,n){t:for(;;){const r=t,o=e,i=n;if(null!=i){const s=i,u=0|r.Compare(o,Oo(s));if(0===u)return v(To(s));if(s instanceof Ao){const i=s;t=r,e=o,n=u<0?jo(i):Lo(i);continue t}return}return}}(t,e,n);if(null==r)throw new Error;return E(r)}(t.comparer,e,t.tree)}function Vo(t){return Ho(t.tree)}function Xo(t,e){return function(t,e,n){t:for(;;){const r=t,o=e,i=n;if(null!=i){const s=i,u=0|r.Compare(o,Oo(s));if(s instanceof Ao){const i=s;if(u<0){t=r,e=o,n=jo(i);continue t}if(0===u)return!0;t=r,e=o,n=Lo(i);continue t}return 0===u}return!1}}(t.comparer,e,t.tree)}(()=>{const t=function(){return t=(t,e)=>b(t,e),{Compare:(e,n)=>t(e,n)};var t}();Zo.empty=function(t,e){return new Zo(t,e)}(t,void 0)})(),new Po([],{Equals:(t,e)=>p(t,e),GetHashCode:t=>function(t){return null==t?0:e(t)?t.GetHashCode():f(l.id(t))}(t)}).clear(),le(),Zo.empty,or(),or(),or(),or();to((t=>{const e=t.Parent;return Pr((()=>{e.focus(),e.setSelectionRange(99999,99999)})),ro(t,"autofocus")}));const Yo=new class extends class{constructor(t,e,n){this.mk=t,this.ofStr=e,this.empty=n}}{constructor(){super(((t,e)=>function(t,e){return to((n=>{const r=n.Document.createElement(t),o=new Ir(1,r);return dr(r,0|ar()),ao(e,function(t,e){return new Yr(e.Document,t,e.Previous,new Xr(0),e.MakeName,e.Debug,e.StyleSheet)}(o,n)),Kr(n,new Ir(1,r)),cr(r,"sutil-element-ready"),no(r)}))}(t,e)),(t=>ho(t)),(()=>fo([])))}};function Ko(t){return ho(t)}new class extends class{constructor(t,e){this.mk=t,this.mkBool=e}}{constructor(){super(((t,e)=>lo(t,e)),((t,e)=>lo(t,e)))}},new class{constructor(t){this.mk=t}}(((t,e)=>[t,e])),Ze(Yo,[Ko("Hello"),fo([Ko("World")]),fo([Ko("A"),fo([Ko("B")]),Ko("C")])]);const Qo=Je("Sutil.DOM",Ce([We("Dummy test",(()=>{})),We("div",(()=>{Ze(Yo,[])}))])),ti=Je("Sutil.Store",Ce([We("Immediate initialisation upon subscription",(()=>{const t=vo(42);let e=0;xo((t=>{e=t}),t).Dispose()})),We("Store updates when no subscribers",(()=>{const t=vo(42);Eo(t,43);let e=0;xo((t=>{e=t}),t).Dispose()})),We("Update store notifies subscriber",(()=>{const t=vo(42);let e=0;const n=xo((t=>{e=t}),t);Eo(t,43),n.Dispose()})),We("Multiple subscribers initialize",(()=>{const t=vo(42);let e=0,n=0;xo((t=>{e=t}),t),xo((t=>{n=t}),t)})),We("Multiple subscribers update",(()=>{const t=vo(42);let e=0,n=0;xo((t=>{e=t}),t),xo((t=>{n=t}),t),Eo(t,43)})),We("Dispose terminates subscription",(()=>{const t=vo(42);let e=0,n=0;const r=xo((t=>{e=t}),t);xo((t=>{n=t}),t),r.Dispose(),Eo(t,43)})),We("No dispose on number of subscribers becoming 0",(()=>{const t=vo(42);let e=0,n=0;xo((t=>{e=t}),t).Dispose(),xo((t=>{n=t}),t),Eo(t,43)})),We("Notify all updates even when equal",(()=>{const t=vo(42);let e=0;const n=xo((t=>{e+=1}),t);Eo(t,42),Eo(t,42),n.Dispose()}))])),ei=Je("Sutil.Observable",Ce([We("distinctUntilChanged",(()=>{const t=vo(0),e=vo(0);let n=0,r=0;xo((t=>{n+=1}),t),xo((t=>{r+=1}),So(((t,e)=>p(t,e)),e)),ye((e=>{Eo(t,e)}),Ce([1,1,1,2,2,2])),ye((t=>{Eo(e,t)}),Ce([1,1,1,2,2,2]))})),We("distinctUntilChangedCompare",(()=>{const t=vo("-"),e=vo("-");let n=0,r=0;xo((t=>{n+=1}),t),xo((t=>{r+=1}),So(((t,e)=>t.toLocaleUpperCase()===e.toLocaleUpperCase()),e));const o=Ce(["a","A","a","b","B","b"]);ye((e=>{Eo(t,e)}),o),ye((t=>{Eo(e,t)}),o)}))]));console.log(v("Running tests")),function(t){let e=0,n=0;const r=o(t);try{for(;r["System.Collections.IEnumerator.MoveNext"]();){const t=r["System.Collections.Generic.IEnumerator`1.get_Current"]();ze("# "+t.Name);const i=o(t.Tests);try{for(;i["System.Collections.IEnumerator.MoveNext"]();){const t=i["System.Collections.Generic.IEnumerator`1.get_Current"]();try{t.Test(),ze("- "+t.Name+": Pass"),n+=1}catch(n){ze("- "+t.Name+": Fail: "+n.message),e+=1}}}finally{i.Dispose()}}}finally{r.Dispose()}ze(0===e?"SUCCESS: All tests passed ("+c(n)+")":"FAIL: "+c(e)+" failed, "+c(n)+" passed")}(Ce([Qo,ti,ei]))})();